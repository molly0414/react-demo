(this["webpackJsonpantd-demo"]=this["webpackJsonpantd-demo"]||[]).push([[0],{155:function(e,t,c){},248:function(e,t,c){},249:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),i=c(23),s=c.n(i),r=(c(155),c(27)),o=c(32),j=c(138),d=c.n(j),l=c(6),u={products:null,isLoading:!1,isLoaded:!1},O=Object(n.createContext)(),b=function(e,t){switch(console.log("Pinned dispatched",t),t.type){case"GET_PRODUCTS_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0,isLoaded:!1});case"GET_PRODUCTS_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isLoaded:!0,products:t.payload.products});case"GET_PRODUCTS_FAILURE":return Object(o.a)(Object(o.a)({},e),{},{products:null,isLoading:!1,isLoaded:!1});default:throw new Error("Unknown action: ".concat(t.type))}},h=function(e){e({type:"GET_PRODUCTS_REQUEST"}),d.a.get("https://molly0414.github.io/react-demo/data/items.json").then((function(t){e({type:"GET_PRODUCTS_SUCCESS",payload:{products:t.data}})})).catch((function(t){console.error(t),e({type:"GET_PRODUCTS_FAILURE"})}))},m=function(e){var t=e.children,c=Object(n.useReducer)(b,u),a=Object(r.a)(c,2),i=a[0],s=a[1];return Object(l.jsx)(O.Provider,{value:{state:i,dispatch:s},children:t})},x=c(146);var f=function(e,t){var c=a.a.useState((function(){try{var c=window.localStorage.getItem(e);return c?JSON.parse(c):t}catch(n){return console.error(n),t}})),n=Object(r.a)(c,2),i=n[0],s=n[1];return[i,function(t){try{var c=t instanceof Function?t(i):t;s(c),window.localStorage.setItem(e,JSON.stringify(c))}catch(n){console.error(n)}}]},p={items:[]},y=Object(n.createContext)(),g=function(e,t){switch(console.log("Pinned dispatched: ",t),t.type){case"ADD_ITEM_TO_CART":var c=t.payload.newItem.id,n=null;if(e.items.map((function(e){return e.id})).includes(c))n=e.items.map((function(e){return e.id===c?Object(o.a)(Object(o.a)({},e),{},{quantity:e.quantity+t.payload.newItem.quantity}):e}));else n=[].concat(Object(x.a)(e.items),[t.payload.newItem]);return{items:n};case"CHANGE_COUNT":return{items:e.items.map((function(e){return e.id===t.payload.changeItemId?Object(o.a)(Object(o.a)({},e),{},{quantity:t.payload.newQuantity}):e}))};case"REMOVE_FROM_CART":return{items:e.items.filter((function(e){return e.id!==t.payload.removeItemId}))};case"CLEAR_CART":return p;default:throw new Error("Unknown action: ".concat(t.type))}},C=function(e){var t=e.children,c=f("cartItems",[]),a=Object(r.a)(c,2),i=a[0],s=a[1],o={items:i||[]},j=Object(n.useReducer)(g,o),d=Object(r.a)(j,2),u=d[0],O=d[1],b=JSON.stringify(u.items);return Object(n.useEffect)((function(){s(u.items)}),[s,u.items,b]),Object(l.jsx)(y.Provider,{value:{state:u,dispatch:O},children:t})},T=c(19),v=c(42),w=c(252),E=c(256),S=c(259),N=c(260),_=c(264),I=c(262),R=c(71),L=c(43),A=c(70),U=c(253),D=c(257),k=U.a.Meta,M=function(e){var t=e.data;return null===t?Object(l.jsxs)(U.a,{style:{height:300},children:[Object(l.jsx)(D.a,{loading:"true"}),Object(l.jsx)(k,{title:"",description:""})]}):Object(l.jsx)(v.b,{to:{pathname:"/item/"+t.id},children:Object(l.jsx)(U.a,{hoverable:!0,cover:Object(l.jsx)("img",{alt:t.title,src:t.image}),children:Object(l.jsx)(k,{title:t.name,description:"NT$ "+t.price})})})},P=function(e){var t=e.searchKeyword,c=Object(n.useContext)(O),a=c.state,i=c.dispatch,s=a.products,r=a.isLoading,o=a.isLoaded,j=s&&s.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())||!t}));return Object(n.useEffect)((function(){h(i)}),[i]),r?Object(l.jsx)(R.a,{gutter:[24,24],children:new Array(12).fill(null).map((function(e,t){var c=t+1;return Object(l.jsx)(L.a,{xs:12,sm:8,md:6,xl:4,children:Object(l.jsx)(M,{data:null})},c)}))}):o&&j.length>0?Object(l.jsx)(R.a,{gutter:[24,24],children:j.map((function(e){return Object(l.jsx)(L.a,{xs:12,sm:8,md:6,xl:4,children:Object(l.jsx)(M,{data:e})},e.id)}))}):Object(l.jsx)(A.a,{})},F=c(255),G=c(251),q=c(254),J=c(261),H=c(57),Q=F.a.Option,V=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},z=function(){var e=Object(n.useState)("1"),t=Object(r.a)(e,2),c=t[0],a=t[1],i=Object(T.g)().id,s=Object(n.useContext)(O),j=s.state,d=s.dispatch,u=j.products,b=j.isLoading,m=j.isLoaded,x=Object(n.useContext)(y).dispatch;if(Object(n.useEffect)((function(){h(d)}),[d]),b)return Object(l.jsx)("div",{className:"center-content",children:Object(l.jsx)(G.a,{size:"large"})});for(var f=[],p=1;p<V(2,10);p++)f.push(Object(l.jsx)(Q,{value:p,children:p},p));if(m&&u){var g=u.find((function(e){return e.id.toString()===i}));return Object(l.jsxs)(R.a,{gutter:[24,24],justify:"center",children:[Object(l.jsx)(L.a,{xs:18,sm:9,md:6,children:Object(l.jsx)(q.a,{src:g.image})}),Object(l.jsxs)(L.a,{xs:18,sm:12,md:8,children:[Object(l.jsx)("h1",{className:"title",children:g.name}),Object(l.jsxs)("h1",{className:"price",children:["NT$ ",g.price]}),Object(l.jsxs)(J.b,{children:[Object(l.jsx)(F.a,{defaultValue:"1",style:{width:60},onChange:a,children:f}),Object(l.jsx)(H.a,{type:"primary",icon:Object(l.jsx)(I.a,{}),onClick:function(){var e=Object(o.a)(Object(o.a)({},g),{},{quantity:Number(c)});!function(e,t){e({type:"ADD_ITEM_TO_CART",payload:{newItem:t}})}(x,e)},children:"ADD TO CART"})]})]})]})}return Object(l.jsx)(A.a,{})},K=c(258),$=c(263),B=c(45),W=F.a.Option,Y=K.a.confirm,X=function(e){for(var t=e.data,c=Object(n.useContext)(y).dispatch,a=[],i=1;i<V(t.quantity,10)+1;i++)a.push(Object(l.jsx)(W,{value:i,children:i},i));return Object(l.jsxs)("div",{className:"cart-item",children:[Object(l.jsx)(v.b,{to:{pathname:"/item/"+t.id},style:{height:"100%"},children:Object(l.jsx)("img",{alt:t.title,src:t.image,className:"cart-item-img hidden-sm"})}),Object(l.jsx)(v.b,{to:{pathname:"/item/"+t.id},children:Object(l.jsx)("h3",{className:"cart-item-title",children:t.name})}),Object(l.jsxs)("h3",{className:"cart-item-price",children:["NT$ ",t.price]}),Object(l.jsx)(B.a,{style:{marginRight:8}}),Object(l.jsx)(F.a,{defaultValue:t.quantity,style:{width:60},onChange:function(e){!function(e,t,c){e({type:"CHANGE_COUNT",payload:{changeItemId:t,newQuantity:c}})}(c,t.id,Number(e))},children:a}),Object(l.jsx)(H.a,{type:"text",icon:Object(l.jsx)($.a,{}),onClick:function(){Y({title:"Are you sure you want to delete "+t.name+"?",icon:Object(l.jsx)($.a,{}),okText:"Yes",cancelText:"No",onOk:function(){!function(e,t){e({type:"REMOVE_FROM_CART",payload:{removeItemId:t}})}(c,t.id)}})},className:"cart-item-delete"})]})},Z=function(){var e=Object(n.useContext)(y).state.items;return e.length>0?Object(l.jsx)(R.a,{gutter:[12,12],justify:"center",children:e.map((function(e){return Object(l.jsx)(L.a,{xs:24,sm:21,md:18,xl:15,children:Object(l.jsx)(X,{data:e})},e.id)}))}):Object(l.jsx)(A.a,{})},ee=(c(248),w.a.Header),te=w.a.Content,ce=w.a.Footer,ne=E.a.Search;var ae=function(){var e=Object(T.f)(),t=Object(n.useState)(""),c=Object(r.a)(t,2),a=c[0],i=c[1],s=Object(n.useState)("home"),o=Object(r.a)(s,2),j=o[0],d=o[1],u=Object(n.useContext)(y).state,O=function(){i("")};return Object(l.jsxs)(w.a,{className:"layout",children:[Object(l.jsxs)(ee,{className:"header",children:[Object(l.jsx)("div",{className:"logo",children:Object(l.jsx)(v.b,{to:"/",onClick:O,children:"Test Logo"})}),Object(l.jsx)(ne,{className:"search hidden-sm",placeholder:"Input search text",allowClear:!0,onSearch:function(t){i(t),e("/"),d("home")}}),Object(l.jsxs)(S.a,{className:"menu",theme:"light",onClick:function(e){return d(e.key)},selectedKeys:[j],mode:"horizontal",children:[Object(l.jsx)(S.a.Item,{icon:Object(l.jsx)(_.a,{}),children:Object(l.jsx)(v.b,{to:"/",onClick:O,children:"Home"})},"home"),Object(l.jsx)(S.a.Item,{icon:Object(l.jsx)(I.a,{}),children:Object(l.jsxs)(v.b,{to:"/my-cart",children:["My Cart ",Object(l.jsx)(N.a,{count:u.items.length,size:"small",children:Object(l.jsx)("p",{})})]})},"cart")]})]}),Object(l.jsx)(te,{className:"site-layout-content",children:Object(l.jsxs)(T.c,{children:[Object(l.jsx)(T.a,{path:"/",element:Object(l.jsx)(P,{searchKeyword:a})}),Object(l.jsx)(T.a,{path:"/my-cart",element:Object(l.jsx)(Z,{})}),Object(l.jsx)(T.a,{path:"/item/:id",element:Object(l.jsx)(z,{})})]})}),Object(l.jsx)(ce,{style:{textAlign:"center"},children:"\xa92021 Created by Molly Wu"})]})};var ie=function(){return Object(l.jsx)(m,{children:Object(l.jsx)(C,{children:Object(l.jsx)(v.a,{basename:"/react-demo",children:Object(l.jsx)(ae,{})})})})},se=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,265)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),i(e),s(e)}))};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(ie,{})}),document.getElementById("root")),se()}},[[249,1,2]]]);
//# sourceMappingURL=main.39bdebfa.chunk.js.map