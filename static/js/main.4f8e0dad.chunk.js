(this["webpackJsonpantd-demo"]=this["webpackJsonpantd-demo"]||[]).push([[0],{160:function(e,t,c){},253:function(e,t,c){},254:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(23),i=c.n(s),r=(c(160),c(27)),o=c(32),j=c(141),l=c.n(j),d=c(6),u={products:null,isLoading:!1,isLoaded:!1},O=Object(n.createContext)(),b=function(e,t){switch(console.log("Pinned dispatched",t),t.type){case"GET_PRODUCTS_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0,isLoaded:!1});case"GET_PRODUCTS_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isLoaded:!0,products:t.payload.products});case"GET_PRODUCTS_FAILURE":return Object(o.a)(Object(o.a)({},e),{},{products:null,isLoading:!1,isLoaded:!1});default:throw new Error("Unknown action: ".concat(t.type))}},m=function(e){e({type:"GET_PRODUCTS_REQUEST"}),l.a.get("https://molly0414.github.io/react-demo/data/items.json").then((function(t){e({type:"GET_PRODUCTS_SUCCESS",payload:{products:t.data}})})).catch((function(t){console.error(t),e({type:"GET_PRODUCTS_FAILURE"})}))},h=function(e){var t=e.children,c=Object(n.useReducer)(b,u),a=Object(r.a)(c,2),s=a[0],i=a[1];return Object(d.jsx)(O.Provider,{value:{state:s,dispatch:i},children:t})},x=c(150);var p=function(e,t){var c=a.a.useState((function(){try{var c=window.localStorage.getItem(e);return c?JSON.parse(c):t}catch(n){return console.error(n),t}})),n=Object(r.a)(c,2),s=n[0],i=n[1];return[s,function(t){try{var c=t instanceof Function?t(s):t;i(c),window.localStorage.setItem(e,JSON.stringify(c))}catch(n){console.error(n)}}]},f={items:[]},y=Object(n.createContext)(),g=function(e,t){switch(console.log("Pinned dispatched: ",t),t.type){case"ADD_ITEM_TO_CART":var c=t.payload.newItem.id,n=null;if(e.items.map((function(e){return e.id})).includes(c))n=e.items.map((function(e){if(e.id===c){var n=e.quantity+t.payload.newItem.quantity;return Object(o.a)(Object(o.a)({},e),{},{quantity:n>10?10:n})}return e}));else n=[].concat(Object(x.a)(e.items),[t.payload.newItem]);return{items:n};case"CHANGE_COUNT":return{items:e.items.map((function(e){return e.id===t.payload.changeItemId?Object(o.a)(Object(o.a)({},e),{},{quantity:t.payload.newQuantity}):e}))};case"REMOVE_FROM_CART":return{items:e.items.filter((function(e){return e.id!==t.payload.removeItemId}))};case"CLEAR_CART":return f;default:throw new Error("Unknown action: ".concat(t.type))}},C=function(e){var t=e.children,c=p("cartItems",[]),a=Object(r.a)(c,2),s=a[0],i=a[1],o={items:s||[]},j=Object(n.useReducer)(g,o),l=Object(r.a)(j,2),u=l[0],O=l[1],b=JSON.stringify(u.items);return Object(n.useEffect)((function(){i(u.items)}),[i,u.items,b]),Object(d.jsx)(y.Provider,{value:{state:u,dispatch:O},children:t})},T=c(19),v=c(42),w=c(258),N=c(262),E=c(265),S=c(266),R=c(270),_=c(268),I=c(72),L=c(43),A=c(71),k=c(259),U=c(263),D=k.a.Meta,P=function(e){var t=e.data;return null===t?Object(d.jsxs)(k.a,{style:{height:300},children:[Object(d.jsx)(U.a,{loading:"true"}),Object(d.jsx)(D,{title:"",description:""})]}):Object(d.jsx)(v.b,{to:{pathname:"/item/"+t.id},children:Object(d.jsx)(k.a,{hoverable:!0,cover:Object(d.jsx)("img",{alt:t.title,src:t.image}),children:Object(d.jsx)(D,{title:t.name,description:"NT$ "+t.price})})})},M=function(e){var t=e.searchKeyword,c=Object(n.useContext)(O),a=c.state,s=c.dispatch,i=a.products,r=a.isLoading,o=a.isLoaded,j=i&&i.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())||!t}));return Object(n.useEffect)((function(){m(s)}),[s]),r?Object(d.jsx)(I.a,{gutter:[24,24],children:new Array(12).fill(null).map((function(e,t){var c=t+1;return Object(d.jsx)(L.a,{xs:12,sm:8,md:6,xl:4,children:Object(d.jsx)(P,{data:null})},c)}))}):o&&j.length>0?Object(d.jsx)(I.a,{gutter:[24,24],children:j.map((function(e){return Object(d.jsx)(L.a,{xs:12,sm:8,md:6,xl:4,children:Object(d.jsx)(P,{data:e})},e.id)}))}):Object(d.jsx)(A.a,{})},F=c(261),G=c(256),q=c(149),H=c(260),J=c(267),z=c(57),B=F.a.Option,K=function(){var e=Object(n.useState)("1"),t=Object(r.a)(e,2),c=t[0],a=t[1],s=Object(T.g)().id,i=Object(n.useContext)(O),j=i.state,l=i.dispatch,u=j.products,b=j.isLoading,h=j.isLoaded,x=Object(n.useContext)(y).dispatch;if(Object(n.useEffect)((function(){m(l)}),[l]),b)return Object(d.jsx)("div",{className:"center-content",children:Object(d.jsx)(G.a,{size:"large"})});for(var p=[],f=1;f<=10;f++)p.push(Object(d.jsx)(B,{value:f,children:f},f));if(h&&u){var g=u.find((function(e){return e.id.toString()===s}));return Object(d.jsxs)(I.a,{gutter:[24,24],justify:"center",children:[Object(d.jsx)(L.a,{xs:18,sm:9,md:6,children:Object(d.jsx)(H.a,{src:g.image})}),Object(d.jsxs)(L.a,{xs:18,sm:12,md:8,children:[Object(d.jsx)("h1",{className:"title",children:g.name}),Object(d.jsxs)("h1",{className:"price",children:["NT$ ",g.price]}),Object(d.jsxs)(J.b,{children:[Object(d.jsx)(F.a,{defaultValue:"1",style:{width:60},onChange:a,children:p}),Object(d.jsx)(z.a,{type:"primary",icon:Object(d.jsx)(_.a,{}),onClick:function(){var e=Object(o.a)(Object(o.a)({},g),{},{quantity:Number(c)});!function(e,t){e({type:"ADD_ITEM_TO_CART",payload:{newItem:t}})}(x,e),q.b.success(g.name+" is added.")},children:"ADD TO CART"})]})]})]})}return Object(d.jsx)(A.a,{})},Q=c(264),V=c(257),$=c(269),Y=c(45),W=F.a.Option,X=Q.a.confirm,Z=function(e){for(var t=e.data,c=Object(n.useContext)(y).dispatch,a=[],s=1;s<=10;s++)a.push(Object(d.jsx)(W,{value:s,children:s},s));return Object(d.jsxs)("div",{className:"cart-item flex-row",children:[Object(d.jsx)(v.b,{to:{pathname:"/item/"+t.id},style:{height:"100%"},children:Object(d.jsx)("img",{alt:t.title,src:t.image,className:"cart-item-img hidden-sm"})}),Object(d.jsx)(v.b,{to:{pathname:"/item/"+t.id},children:Object(d.jsx)("h3",{className:"cart-item-title",children:t.name})}),Object(d.jsxs)("h3",{className:"cart-item-price flex-grow-1",children:["NT$ ",t.price]}),Object(d.jsx)(Y.a,{style:{marginRight:8}}),Object(d.jsx)(F.a,{defaultValue:t.quantity,style:{width:60},onChange:function(e){!function(e,t,c){e({type:"CHANGE_COUNT",payload:{changeItemId:t,newQuantity:c}})}(c,t.id,Number(e))},children:a}),Object(d.jsx)(z.a,{type:"text",icon:Object(d.jsx)($.a,{}),onClick:function(){X({title:"Are you sure you want to delete "+t.name+"?",icon:Object(d.jsx)($.a,{}),okText:"Yes",cancelText:"No",okType:"danger",onOk:function(){!function(e,t){e({type:"REMOVE_FROM_CART",payload:{removeItemId:t}})}(c,t.id)}})},className:"cart-item-delete"})]})},ee=c(154),te=Q.a.confirm,ce=function(){var e=Object(n.useContext)(y),t=e.state,c=e.dispatch,a=t.items;if(a.length>0){for(var s=0,i=0;i<a.length;i++)s+=a[i].price*a[i].quantity;return Object(d.jsx)("div",{children:Object(d.jsxs)(I.a,{gutter:[12,12],justify:"center",children:[Object(d.jsxs)(L.a,{xs:24,sm:21,md:18,xl:15,children:[Object(d.jsxs)("div",{className:"flex-row",children:[Object(d.jsx)("h2",{className:"flex-grow-1",children:"My Cart"}),Object(d.jsx)(z.a,{type:"text",icon:Object(d.jsx)($.a,{}),onClick:function(){te({title:"Are you sure you want to remove all items?",icon:Object(d.jsx)($.a,{}),okText:"Yes",cancelText:"No",okType:"danger",onOk:function(){!function(e){e({type:"CLEAR_CART"})}(c)}})},children:"Remove all items"})]}),Object(d.jsx)(V.a,{style:{marginTop:12,marginBottom:12}})]}),a.map((function(e){return Object(d.jsx)(L.a,{xs:24,sm:21,md:18,xl:15,children:Object(d.jsx)(Z,{data:e})},e.id)})),Object(d.jsxs)(L.a,{xs:24,sm:21,md:18,xl:15,children:[Object(d.jsx)(V.a,{style:{marginTop:12,marginBottom:12}}),Object(d.jsxs)("div",{className:"cart-total",children:[Object(d.jsxs)("h2",{className:"cart-item-price",children:["Total: NT$ ",s]}),Object(d.jsx)(z.a,{type:"primary",icon:Object(d.jsx)(ee.a,{}),size:"large",style:{width:180},children:"CHECKOUT"})]})]})]})})}return Object(d.jsx)(A.a,{})},ne=(c(253),w.a.Header),ae=w.a.Content,se=w.a.Footer,ie=N.a.Search;var re=function(){var e=Object(T.f)(),t=Object(n.useState)(""),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)("home"),o=Object(r.a)(i,2),j=o[0],l=o[1],u=Object(n.useContext)(y).state,O=function(){s("")};return Object(d.jsxs)(w.a,{className:"layout",children:[Object(d.jsxs)(ne,{className:"header",children:[Object(d.jsx)("div",{className:"logo",children:Object(d.jsx)(v.b,{to:"/",onClick:O,children:"Test Logo"})}),Object(d.jsx)(ie,{className:"search hidden-sm",placeholder:"Input search text",allowClear:!0,onSearch:function(t){s(t),e("/"),l("home")}}),Object(d.jsxs)(E.a,{className:"menu",theme:"light",onClick:function(e){return l(e.key)},selectedKeys:[j],mode:"horizontal",children:[Object(d.jsx)(E.a.Item,{icon:Object(d.jsx)(R.a,{}),children:Object(d.jsx)(v.b,{to:"/",onClick:O,children:"Home"})},"home"),Object(d.jsx)(E.a.Item,{icon:Object(d.jsx)(_.a,{}),children:Object(d.jsxs)(v.b,{to:"/my-cart",children:["My Cart ",Object(d.jsx)(S.a,{count:u.items.length,size:"small",children:Object(d.jsx)("p",{})})]})},"cart")]})]}),Object(d.jsx)(ae,{className:"site-layout-content",children:Object(d.jsxs)(T.c,{children:[Object(d.jsx)(T.a,{path:"/",element:Object(d.jsx)(M,{searchKeyword:a})}),Object(d.jsx)(T.a,{path:"/my-cart",element:Object(d.jsx)(ce,{})}),Object(d.jsx)(T.a,{path:"/item/:id",element:Object(d.jsx)(K,{})})]})}),Object(d.jsx)(se,{style:{textAlign:"center"},children:"\xa92021 Created by Molly Wu"})]})};var oe=function(){return Object(d.jsx)(h,{children:Object(d.jsx)(C,{children:Object(d.jsx)(v.a,{basename:"/react-demo",children:Object(d.jsx)(re,{})})})})},je=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,271)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(oe,{})}),document.getElementById("root")),je()}},[[254,1,2]]]);
//# sourceMappingURL=main.4f8e0dad.chunk.js.map